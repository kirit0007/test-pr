<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rashmi üíñ Will You Be My Valentine?</title>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
    :root { 
        --pink: #ff4d88; 
        --dark-pink: #d6336c;
        --bg-gradient: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
    }

    * { box-sizing: border-box; }

    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background-image: var(--bg-gradient);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        overflow: hidden;
        position: relative;
    }

    /* Animated Background Blobs */
    .blob {
        position: absolute;
        filter: blur(50px);
        z-index: 0;
        opacity: 0.6;
        animation: moveBlob 20s infinite alternate;
    }
    .blob-1 { top: 10%; left: 10%; width: 200px; height: 200px; background: #ff9a9e; border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; }
    .blob-2 { bottom: 10%; right: 10%; width: 250px; height: 250px; background: #ffdde1; border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }

    @keyframes moveBlob {
        from { transform: translate(0, 0) rotate(0deg); }
        to { transform: translate(20px, 40px) rotate(20deg); }
    }

    /* Floating hearts background */
    .heart-bg {
        position: fixed;
        bottom: -20px;
        animation: floatUp linear infinite;
        opacity: 0.6;
        pointer-events: none;
        z-index: 0;
    }
    @keyframes floatUp {
        from { transform: translateY(0) rotate(0deg); }
        to { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }

    /* Glassmorphism Card */
    .card {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        width: 100%;
        max-width: 420px;
        padding: 30px;
        border-radius: 25px;
        text-align: center;
        box-shadow: 0 20px 60px rgba(255, 77, 136, 0.25);
        position: relative;
        z-index: 10;
        border: 2px solid rgba(255, 255, 255, 0.5);
        transition: transform 0.3s ease;
    }

    /* Photo Gallery / Carousel */
    .gallery {
        width: 150px;
        height: 150px;
        margin: 0 auto 15px;
        position: relative;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid white;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    .gallery img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        position: absolute;
        top: 0; left: 0;
        opacity: 0;
        transition: opacity 1s ease-in-out;
    }
    .gallery img.active { opacity: 1; }

    .name {
        font-family: 'Great Vibes', cursive;
        font-size: 42px;
        font-weight: 400;
        color: var(--pink);
        margin-bottom: 5px;
        line-height: 1.2;
        text-shadow: 2px 2px 0px rgba(255,255,255,0.5);
    }

    /* Typewriter container */
    #typeText {
        font-size: 18px;
        color: #555;
        min-height: 28px;
        margin-bottom: 5px;
        font-weight: 500;
    }

    /* Reasons Why Text */
    .reasons {
        font-size: 14px;
        color: var(--pink);
        height: 20px;
        margin-bottom: 20px;
        font-style: italic;
    }

    textarea {
        width: 100%;
        border-radius: 15px;
        padding: 15px;
        border: 2px solid #ffccd5;
        margin-top: 10px;
        resize: none;
        font-family: inherit;
        background: rgba(255, 255, 255, 0.9);
        transition: 0.3s;
        outline: none;
    }
    textarea:focus {
        border-color: var(--pink);
        box-shadow: 0 0 10px rgba(255, 77, 136, 0.2);
    }

    .buttons {
        position: relative;
        height: 100px; /* Increased for movement area */
        margin-top: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
    }

    button {
        padding: 12px 30px;
        border-radius: 50px;
        border: none;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        z-index: 5;
    }

    #yesBtn {
        background: var(--pink);
        color: white;
        box-shadow: 0 8px 20px rgba(255, 77, 136, 0.4);
    }
    #yesBtn:hover { transform: scale(1.05); }

    #noBtn {
        background: white;
        color: var(--pink);
        border: 2px solid var(--pink);
        position: absolute; /* Crucial for moving */
        right: 20px; 
    }

    /* Start Screen Overlay */
    #startScreen {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(255,255,255,0.95);
        z-index: 100;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }
    #startScreen h1 { font-family: 'Great Vibes', cursive; color: var(--pink); font-size: 3rem; }
    #startScreen p { color: #666; animation: pulse 1.5s infinite; }

    @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

    /* Success Screen */
    .love-screen {
        display: none;
        animation: fadeIn 1s ease;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }

    .love-screen img {
        width: 100%;
        max-width: 280px;
        border-radius: 18px;
        margin: 12px auto;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    /* Music Control */
    .music-control {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 50;
        background: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        cursor: pointer;
        font-size: 20px;
    }
</style>
</head>

<body>

<!-- Decorative Blobs -->
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>

<!-- Background music -->
<!-- Replaced with a more reliable royalty-free romantic track URL for demo purposes -->
<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_24922150a5.mp3?filename=romantic-piano-125642.mp3" type="audio/mpeg">
</audio>

<div class="music-control" id="musicBtn">üéµ</div>

<!-- START SCREEN (Fixes AutoPlay issues) -->
<div id="startScreen">
    <h1>For Rashmi...</h1>
    <p>Tap anywhere to begin üíå</p>
</div>

<!-- FORM CARD -->
<form class="card" id="form">
    <!-- Gallery Images (Replace srcs with actual photos of her/you two) -->
    <div class="gallery" id="gallery">
        <!-- Cute placeholder GIFs -->
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3Z5aHZ5aHZ5aHZ5aHZ5aHZ5aHZ5aHZ5aHZ5aHZ5aHZ5/26FLdmIp6wJr91JAI/giphy.gif" class="active" alt="Cute Cat">
        <img src="https://media.giphy.com/media/LpDmM2wSt6kTm/giphy.gif" alt="Hearts">
        <img src="https://media.giphy.com/media/T86i6yDyOYz7y/giphy.gif" alt="Love">
    </div>

    <div class="name">Rashmi üíû</div>
    <div id="typeText"></div>
    <div class="reasons" id="reasonsText"></div>

    <textarea 
        id="note" 
        name="note" 
        placeholder="Write something sweet here... üíå"
        rows="2"
    ></textarea>

    <!-- Hidden Time Field -->
    <input type="hidden" name="time" id="timeField">

    <div class="buttons">
        <button type="submit" id="yesBtn">YES üíï</button>
        <button type="button" id="noBtn">NO üíî</button>
    </div>
</form>

<!-- SUCCESS SCREEN -->
<div class="card love-screen" id="loveScreen">
    <div class="name">Yay! She said YES! üéâ</div>
    <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" alt="Celebration">
    <h3>Can't wait for our date! üåπ</h3>
    <p>Chocolates üç´, Flowers üíê, and Forever ‚ù§Ô∏è</p>
</div>

<!-- EXTERNAL SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
    /* --- CONFIGURATION --- */
    // Initialize EmailJS with your Key
    emailjs.init("4jgb22YXxOARwnm45");

    /* --- DOM ELEMENTS --- */
    const startScreen = document.getElementById('startScreen');
    const music = document.getElementById('bgMusic');
    const musicBtn = document.getElementById('musicBtn');
    const noBtn = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const form = document.getElementById('form');
    const loveScreen = document.getElementById('loveScreen');
    const typeTarget = document.getElementById('typeText');
    const reasonTarget = document.getElementById('reasonsText');
    
    /* --- START SEQUENCE --- */
    startScreen.addEventListener('click', () => {
        startScreen.style.opacity = '0';
        setTimeout(() => startScreen.style.display = 'none', 500);
        music.volume = 0.5;
        music.play().catch(e => console.log("Audio play failed", e));
        startTyping();
    });

    musicBtn.addEventListener('click', () => {
        if(music.paused) {
            music.play();
            musicBtn.innerHTML = "üéµ";
        } else {
            music.pause();
            musicBtn.innerHTML = "üîá";
        }
    });

    /* --- PHOTO GALLERY SLIDESHOW --- */
    let slideIndex = 0;
    const slides = document.querySelectorAll('.gallery img');
    setInterval(() => {
        slides[slideIndex].classList.remove('active');
        slideIndex = (slideIndex + 1) % slides.length;
        slides[slideIndex].classList.add('active');
    }, 3000); // Change photo every 3 seconds

    /* --- TYPING ANIMATION --- */
    const mainText = "Will you be my Valentine?";
    function startTyping() {
        let i = 0;
        typeTarget.innerHTML = "";
        (function type() {
            if (i < mainText.length) {
                typeTarget.innerHTML += mainText[i++];
                setTimeout(type, 80);
            } else {
                startReasons(); // Start cycling reasons after typing
            }
        })();
    }

    /* --- REASONS CYCLER --- */
    const reasons = ["You are my favorite person", "My smile starts with you", "You are beautiful", "My best friend"];
    function startReasons() {
        let rIndex = 0;
        setInterval(() => {
            reasonTarget.style.opacity = 0;
            setTimeout(() => {
                reasonTarget.innerHTML = `‚ú® ${reasons[rIndex]} ‚ú®`;
                reasonTarget.style.opacity = 1;
                rIndex = (rIndex + 1) % reasons.length;
            }, 500);
        }, 3500);
    }

    /* --- BUTTON LOGIC (Enhanced) --- */
    noBtn.addEventListener("mouseover", moveButton);
    noBtn.addEventListener("click", moveButton);

    function moveButton() {
        // 1. Move the No Button
        const x = Math.random() * (window.innerWidth - noBtn.offsetWidth) - (window.innerWidth / 2);
        const y = Math.random() * (window.innerHeight - noBtn.offsetHeight) - (window.innerHeight / 2);
        
        // Constrain movement within viewport visually
        const safeX = Math.max(-150, Math.min(150, x));
        const safeY = Math.max(-150, Math.min(150, y));

        noBtn.style.transform = `translate(${safeX}px, ${safeY}px)`;
        
        // 2. Make Yes Button Grow
        let currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
        let currentPad = parseFloat(window.getComputedStyle(yesBtn).paddingLeft);
        
        yesBtn.style.fontSize = `${currentSize + 2}px`;
        yesBtn.style.padding = `${currentPad + 5}px ${currentPad * 2}px`; // Keep aspect ratio
        yesBtn.innerText = "YES PLEASE! ü•∫";
    }

    /* --- FORM SUBMISSION --- */
    form.addEventListener("submit", function(e) {
        e.preventDefault();

        // Capture Time
        document.getElementById("timeField").value = new Date().toLocaleString();

        // Send Email (Core Logic Intact)
        // Note: Using your specific Service/Template IDs
        emailjs.sendForm(
            "service_lfkolnh",
            "template_u6lrdmg",
            form
        )
        .then(() => console.log("‚úÖ Email sent"))
        .catch(err => console.error("‚ùå Email error:", err));

        // UI Transition
        form.style.display = "none";
        loveScreen.style.display = "block";

        // Celebration
        shootConfetti();
    });

    function shootConfetti() {
        const duration = 3000;
        const end = Date.now() + duration;

        (function frame() {
            confetti({
                particleCount: 5,
                angle: 60,
                spread: 55,
                origin: { x: 0 }
            });
            confetti({
                particleCount: 5,
                angle: 120,
                spread: 55,
                origin: { x: 1 }
            });

            if (Date.now() < end) {
                requestAnimationFrame(frame);
            }
        }());
    }

    /* --- FLOATING HEARTS (Pure CSS/JS Hybrid) --- */
    setInterval(() => {
        const h = document.createElement("div");
        h.className = "heart-bg";
        h.innerHTML = Math.random() > 0.5 ? "üíñ" : "üå∏"; // Added flowers
        h.style.left = Math.random() * 100 + "vw";
        h.style.fontSize = 10 + Math.random() * 20 + "px";
        h.style.animationDuration = 3 + Math.random() * 5 + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 8000);
    }, 400);

</script>

</body>
</html>
